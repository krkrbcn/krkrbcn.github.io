<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>今月の献立</title>
        <style>
            table th, table td{
                border: solid 1px black;
            }
        </style>
        <script>
            async function loadCSV() {
            const today = new Date();
            const month = today.getMonth()+1;
            const date = today.getDate();
            let file_date = "DB_Ryosyoku - " + month + ".csv";
            const data = await fetch(file_date);
            const resCSV = await data.text();
            const dataCSV = resCSV.trim().split(/\r\n|\n/).map(line => line.split(','));
            const filteredData = dataCSV.filter(row => row[1]==date);
            const ToData = filteredData.map(data => `${data[0]}${data[1]}${data[2]}${data[3]}${data[4]}${data[5]}${data[6]}${data[7]}${data[8]}${data[9]}${data[10]}${data[11]}`).join('');
            const htmlData = dataCSV.map(data => `<tr>
                                                    <!--<th>${data[0]}</th>-->
                                                    <td>${data[1]}</td>
                                                    <td>${data[2]}</td>
                                                    <td>${data[3]}</td>
                                                    <td>${data[4]}</td>
                                                    <td>${data[5]}</td>
                                                    <td>${data[6]}</td>
                                                    <td>${data[7]}</td>
                                                    <td>${data[8]}</td>
                                                    <td>${data[9]}</td>
                                                    <td>${data[10]}</td>
                                                    <td>${data[11]}</td>
                                                </tr>`).join('');
            document.getElementById('tableCSV').insertAdjacentHTML('beforeend',htmlData);
            document.getElementById('h1tag').insertAdjacentHTML('beforeend',ToData);
            }
            loadCSV();
        </script>
    </head>

    <body>
        <table id="tableCSV">
            <tr>
             <!--<th></th>-->
             <th>日付</th>
             <th>朝食1</th>
             <th>朝食2</th>
             <th>朝食3</th>
             <th>昼食1</th>
             <th>昼食2</th>
             <th>夕食1</th>
             <th>夕食2</th>
             <th>夕食3</th>
             <th></th>
             <th>備考</th>
             </tr>
        </table>
    </body>
</html>